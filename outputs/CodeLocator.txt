Title: Add `CHANNEL-CODE` Field to Transaction File for Channel Identification in Batch Processing and Reporting

User Story:
As a COBOL developer,
I want to add a `CHANNEL-CODE` field to the transaction file,
so that the source of each transaction (e.g., ATM, Mobile, Branch) can be captured and processed,
allowing for improved analytics, auditing, and fraud detection based on transaction channels through batch processing and reporting.

Acceptance Criteria:
1. Definition
   A new field `CHANNEL-CODE` (`PIC X(04)`) is defined in the relevant copybooks (e.g., `TRANSACTION.CPY`).

2. File Layout
   Transaction input and output files are updated to include the `CHANNEL-CODE` field and corresponding layout adjustments.

3. Program Updates
   All programs (batch, online, utility) that read or write transaction data are updated to handle the new field appropriately.

4. Test Data
   Sample input files and test data include valid `CHANNEL-CODE` values (e.g., `BRCH`, `ATM`, `MOBL`, `NETB`).

5. LRECL & FD Adjustments
   The LRECL (Logical Record Length) and FD (File Description) entries in COBOL programs and JCL are adjusted to reflect the new field.

6. Documentation
   The data dictionary and all relevant documentation are updated to reflect the structure and purpose of `CHANNEL-CODE`.

7. Reporting
   Any reports or logs that output transaction details include the `CHANNEL-CODE` field where applicable.

Validation Notes:
- Structure: The story clearly outlines the requirement, acceptance criteria, and justification.
- Completeness: Covers definition, implementation, testing, documentation, and reporting.
- Spelling & Grammar: Minor refinements made for clarity and consistency.

Next Steps:
1. Repo Scan:
   Check `TRANSACTION.CPY` (or equivalent) for the presence of `CHANNEL-CODE`.
   If not present, add the field:
     05 CHANNEL-CODE PIC X(04). *> BRCH, ATM, MOBL, NETB

2. Code Changes:
   - Update relevant copybooks
   - Modify file layouts
   - Adjust LRECL and FD definitions

3. Testing:
   - Update input files
   - Include diverse test values for `CHANNEL-CODE`

4. Documentation:
   - Update README
   - Refresh the data dictionary
   - Comment changes in COBOL programs

5. Reporting:
   - Ensure reports/logs show `CHANNEL-CODE` wherever transaction details are printed

----------

**Summary**:
User Story: Add `CHANNEL-CODE` Field to Transaction File for Channel Identification in Batch Processing and Reporting  
- 4 impacted components identified (**High impact only**)  
- High complexity change affecting transaction data structure, all batch processing, validation, and reporting programs that read/write transaction files, and the core transaction copybook.

---

**Ranked Impact List**:

| Program File Path                          | Impact | Nature  | Affected Paragraphs/Sections                | Dependency Path                                      |
|--------------------------------------------|--------|---------|---------------------------------------------|------------------------------------------------------|
| `src/copybook/common/TRNREC.cpy`           | High   | Direct  | CHANNEL-CODE field definition               | Used by all transaction-processing programs          |
| `src/programs/batch/RPTPOS00.cbl`          | High   | Direct  | 1100-OPEN-FILES, 2200-PROCESS-TRANSACTIONS | Reads/writes transaction file, uses TRNREC           |
| `src/programs/utility/UTLVAL00.cbl`        | High   | Direct  | 1100-OPEN-FILES, 2100-PROCESS-VALIDATION   | Reads/writes transaction file, uses TRNREC           |
| `src/programs/test/TSTGEN00.cbl`           | High   | Direct  | 2300-GEN-TRANSACTION, 2320-WRITE-TRAN-RECORD| Generates transaction test data, writes transaction file, uses TRNREC |

---

**JSON Metadata**:
```json
{
  "impactAnalysis": {
    "userStory": "Add CHANNEL-CODE Field to Transaction File for Channel Identification in Batch Processing and Reporting",
    "impactedComponents": [
      {
        "programFilePath": "src/copybook/common/TRNREC.cpy",
        "impactScore": 0.99,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["CHANNEL-CODE field definition"],
        "dependencyPath": ["TRNREC.cpy"],
        "rationale": "Core copybook for transaction record structure; adding CHANNEL-CODE here impacts all programs including this copybook."
      },
      {
        "programFilePath": "src/programs/batch/RPTPOS00.cbl",
        "impactScore": 0.97,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["1100-OPEN-FILES", "2200-PROCESS-TRANSACTIONS"],
        "dependencyPath": ["RPTPOS00.cbl", "TRNREC.cpy"],
        "rationale": "Batch reporting program that reads/writes transaction files and uses TRNREC copybook; must be updated for CHANNEL-CODE."
      },
      {
        "programFilePath": "src/programs/utility/UTLVAL00.cbl",
        "impactScore": 0.96,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["1100-OPEN-FILES", "2100-PROCESS-VALIDATION"],
        "dependencyPath": ["UTLVAL00.cbl", "TRNREC.cpy"],
        "rationale": "Utility validation program that processes transaction files using TRNREC; must handle new CHANNEL-CODE field."
      },
      {
        "programFilePath": "src/programs/test/TSTGEN00.cbl",
        "impactScore": 0.95,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["2300-GEN-TRANSACTION", "2320-WRITE-TRAN-RECORD"],
        "dependencyPath": ["TSTGEN00.cbl", "TRNREC.cpy"],
        "rationale": "Test data generator that creates transaction files using TRNREC; must generate and populate CHANNEL-CODE for test records."
      }
    ]
  }
}
```

---

**Visualization**:

```mermaid
graph TD
    subgraph Copybook
      TRNREC["src/copybook/common/TRNREC.cpy"]
    end
    subgraph Batch
      RPTPOS00["src/programs/batch/RPTPOS00.cbl"]
    end
    subgraph Utility
      UTLVAL00["src/programs/utility/UTLVAL00.cbl"]
    end
    subgraph Test
      TSTGEN00["src/programs/test/TSTGEN00.cbl"]
    end

    TRNREC -- High Impact --> RPTPOS00
    TRNREC -- High Impact --> UTLVAL00
    TRNREC -- High Impact --> TSTGEN00

    style TRNREC fill:#ffcccc,stroke:#d33,stroke-width:2px
    style RPTPOS00 fill:#ffcccc,stroke:#d33,stroke-width:2px
    style UTLVAL00 fill:#ffcccc,stroke:#d33,stroke-width:2px
    style TSTGEN00 fill:#ffcccc,stroke:#d33,stroke-width:2px
```

---

**Reasoning**:
- `src/copybook/common/TRNREC.cpy` is the core transaction record copybook. Adding `CHANNEL-CODE` here is required by the user story and directly impacts all programs that include this copybook.
- `src/programs/batch/RPTPOS00.cbl` is a batch reporting program that reads/writes transaction files and includes TRNREC. It must be updated to handle the new field in file layouts, FD, and reporting.
- `src/programs/utility/UTLVAL00.cbl` is a utility validation program that processes transaction files, also using TRNREC. It must be updated for the new field in validation logic and file handling.
- `src/programs/test/TSTGEN00.cbl` generates test data for transactions using TRNREC. It must be updated to generate valid `CHANNEL-CODE` values in test records.

All other programs, copybooks, and JCL were analyzed and determined to have lower or indirect impact, or do not interact directly with the transaction file structure as defined in TRNREC. Only the above four components meet the strict "High impact" criteria for this user story.
