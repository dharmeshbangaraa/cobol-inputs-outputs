Impact Analysis Report

----------

## Summary

**User Story:** Add Transaction Type Field to Batch Processing and Reporting  
**Overview:**  
A new field, `TRANSACTION-TYPE` (PIC X(10)), must be added to the transaction record layout (copybook) and integrated into both batch processing and reporting programs. The batch processor must accept, store, and process this field, while the reporting program must display it in reports. All programs must handle missing values for backward compatibility.

- **Total impacted components:** 5 (1 copybook, 4 programs)
- **Complexity:** Medium-High (shared data structure, multiple direct/indirect dependencies, reporting and processing logic, backward compatibility required)

---

## Ranked Impact List

| Program/Copybook              | Impact   | Nature   | Affected Paragraphs/Sections                  | Dependency Path                        |
|-------------------------------|----------|----------|-----------------------------------------------|----------------------------------------|
| TRNREC.cpy                    | High     | Direct   | N/A (data structure)                          | -                                      |
| PORTTRAN.cbl                  | High     | Direct   | 2100-VALIDATE-TRANSACTION, 2120-CHECK-TRANSACTION-TYPE, 2210-PROCESS-BUY, 2220-PROCESS-SELL, 2230-PROCESS-TRANSFER, 2240-PROCESS-FEE, 2300-UPDATE-AUDIT-TRAIL | TRNREC.cpy → PORTTRAN.cbl              |
| RPTPOS00.cbl                  | High     | Direct   | 2100-READ-POSITIONS, 2200-PROCESS-TRANSACTIONS, 2110-FORMAT-POSITION, report output | TRNREC.cpy → RPTPOS00.cbl              |
| UTLVAL00.cbl                  | Medium   | Indirect | 2200-CHECK-INTEGRITY, 2220-CHECK-TRANSACTION-INTEGRITY, 2320-CHECK-TRANSACTION-XREF, 2420-CHECK-TRANSACTION-FORMAT | TRNREC.cpy → UTLVAL00.cbl              |
| TSTGEN00.cbl                  | Low      | Indirect | 2300-GEN-TRANSACTION, 2310-GEN-TRAN-DATA, 2320-WRITE-TRAN-RECORD | TRNREC.cpy → TSTGEN00.cbl              |

---

## JSON Metadata

```json
{
  "impactAnalysis": {
    "userStory": "Add Transaction Type Field to Batch Processing and Reporting",
    "impactedComponents": [
      {
        "programName": "TRNREC.cpy",
        "impactScore": 1.0,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": [],
        "dependencyPath": ["TRNREC.cpy"],
        "rationale": "Primary transaction record copybook; all programs using this structure must be updated to include the new TRANSACTION-TYPE field."
      },
      {
        "programName": "PORTTRAN.cbl",
        "impactScore": 0.95,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": [
          "2100-VALIDATE-TRANSACTION",
          "2120-CHECK-TRANSACTION-TYPE",
          "2210-PROCESS-BUY",
          "2220-PROCESS-SELL",
          "2230-PROCESS-TRANSFER",
          "2240-PROCESS-FEE",
          "2300-UPDATE-AUDIT-TRAIL"
        ],
        "dependencyPath": ["TRNREC.cpy", "PORTTRAN.cbl"],
        "rationale": "Main batch transaction processor; processes and validates transaction records, must read/write new field."
      },
      {
        "programName": "RPTPOS00.cbl",
        "impactScore": 0.93,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": [
          "2100-READ-POSITIONS",
          "2200-PROCESS-TRANSACTIONS",
          "2110-FORMAT-POSITION"
        ],
        "dependencyPath": ["TRNREC.cpy", "RPTPOS00.cbl"],
        "rationale": "Main reporting program; must read and display the new transaction type in reports."
      },
      {
        "programName": "UTLVAL00.cbl",
        "impactScore": 0.7,
        "impactLevel": "Medium",
        "impactType": "Indirect",
        "affectedParagraphs": [
          "2200-CHECK-INTEGRITY",
          "2220-CHECK-TRANSACTION-INTEGRITY",
          "2320-CHECK-TRANSACTION-XREF",
          "2420-CHECK-TRANSACTION-FORMAT"
        ],
        "dependencyPath": ["TRNREC.cpy", "UTLVAL00.cbl"],
        "rationale": "Validation utility; uses transaction record for integrity checks, must be updated for new field."
      },
      {
        "programName": "TSTGEN00.cbl",
        "impactScore": 0.5,
        "impactLevel": "Low",
        "impactType": "Indirect",
        "affectedParagraphs": [
          "2300-GEN-TRANSACTION",
          "2310-GEN-TRAN-DATA",
          "2320-WRITE-TRAN-RECORD"
        ],
        "dependencyPath": ["TRNREC.cpy", "TSTGEN00.cbl"],
        "rationale": "Test data generator; must generate and handle new field for test cases and regression."
      }
    ]
  }
}
```

---

## Visualization

```mermaid
graph TD
    TRNREC[TRNREC.cpy (Copybook)]:::high
    PORTTRAN[PORTTRAN.cbl]:::high
    RPTPOS00[RPTPOS00.cbl]:::high
    UTLVAL00[UTLVAL00.cbl]:::medium
    TSTGEN00[TSTGEN00.cbl]:::low

    TRNREC --> PORTTRAN
    TRNREC --> RPTPOS00
    TRNREC --> UTLVAL00
    TRNREC --> TSTGEN00

    classDef high fill:#ffcccc,stroke:#d33,stroke-width:2px;
    classDef medium fill:#fff5cc,stroke:#d9b300,stroke-width:2px;
    classDef low fill:#ccffcc,stroke:#2d2,stroke-width:2px;
```

---

**Reasoning:**  
- `TRNREC.cpy` is the central copybook for transaction records, so any change directly affects all programs using it.
- `PORTTRAN.cbl` and `RPTPOS00.cbl` are the main batch and reporting programs, both directly process/display transaction data.
- `UTLVAL00.cbl` and `TSTGEN00.cbl` are indirectly impacted due to their use of the transaction record for validation and test data generation.
- Impact scores reflect proximity to the core change, business criticality, and likelihood of complex updates.

**End of Report**
