**Summary**:
User Story: Add `CHANNEL-CODE` Field to Transaction File for Channel Identification in Batch Processing and Reporting

- 6 impacted components identified (**High impact only**)
- High complexity change: affects core transaction data structures, file layouts, batch processing, reporting, test data, and JCL. All programs and copybooks that define, read, write, or report on transaction data must be updated to support the new `CHANNEL-CODE` field.

---

**Ranked Impact List**:

| Program File Path                          | Impact | Nature  | Affected Paragraphs/Sections                | Dependency Path                                  |
|--------------------------------------------|--------|---------|---------------------------------------------|--------------------------------------------------|
| src/copybook/common/TRNREC.cpy             | High   | Direct  | CHANNEL-CODE definition, record layout      | Used by all transaction-processing programs      |
| src/programs/portfolio/PORTTRAN.cbl        | High   | Direct  | 1000-INITIALIZE, 2000-PROCESS-TRANSACTIONS, 2100-VALIDATE-TRANSACTION, FD section | Reads/writes transaction file, uses TRNREC.cpy   |
| src/programs/batch/RPTAUD00.cbl            | High   | Direct  | 1000-INITIALIZE, 2000-PROCESS-REPORT, FD section | Reads transaction file for reporting, uses TRNREC.cpy |
| src/programs/test/TSTGEN00.cbl             | High   | Direct  | 1000-INITIALIZE, 2000-PROCESS, FD section  | Generates test transaction data, uses TRNREC.cpy |
| src/programs/utility/UTLVAL00.cbl          | High   | Direct  | 1000-INITIALIZE, 2000-PROCESS, FD section  | Validates transaction files, uses TRNREC.cpy     |
| src/jcl/RPTAUD00.jcl                       | High   | Direct  | DD statements for transaction/report files  | JCL for batch reporting, LRECL/record length     |

---

**JSON Metadata**:
```json
{
  "impactAnalysis": {
    "userStory": "Add CHANNEL-CODE Field to Transaction File for Channel Identification in Batch Processing and Reporting",
    "impactedComponents": [
      {
        "programFilePath": "src/copybook/common/TRNREC.cpy",
        "impactScore": 0.99,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["CHANNEL-CODE definition", "transaction record layout"],
        "dependencyPath": ["TRNREC.cpy"],
        "rationale": "Primary copybook for transaction record structure; all programs referencing transaction data must include the new CHANNEL-CODE field."
      },
      {
        "programFilePath": "src/programs/portfolio/PORTTRAN.cbl",
        "impactScore": 0.97,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["1000-INITIALIZE", "2000-PROCESS-TRANSACTIONS", "2100-VALIDATE-TRANSACTION", "FD section"],
        "dependencyPath": ["PORTTRAN.cbl", "TRNREC.cpy"],
        "rationale": "Reads and writes transaction file; must handle new CHANNEL-CODE field in all transaction processing logic and file definitions."
      },
      {
        "programFilePath": "src/programs/batch/RPTAUD00.cbl",
        "impactScore": 0.95,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["1000-INITIALIZE", "2000-PROCESS-REPORT", "FD section"],
        "dependencyPath": ["RPTAUD00.cbl", "TRNREC.cpy"],
        "rationale": "Batch reporting program; must include CHANNEL-CODE in report outputs and file layouts."
      },
      {
        "programFilePath": "src/programs/test/TSTGEN00.cbl",
        "impactScore": 0.93,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["1000-INITIALIZE", "2000-PROCESS", "FD section"],
        "dependencyPath": ["TSTGEN00.cbl", "TRNREC.cpy"],
        "rationale": "Test data generator; must produce sample transactions with valid CHANNEL-CODE values."
      },
      {
        "programFilePath": "src/programs/utility/UTLVAL00.cbl",
        "impactScore": 0.92,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["1000-INITIALIZE", "2000-PROCESS", "FD section"],
        "dependencyPath": ["UTLVAL00.cbl", "TRNREC.cpy"],
        "rationale": "Utility for validating transaction files; must validate presence and correctness of CHANNEL-CODE."
      },
      {
        "programFilePath": "src/jcl/RPTAUD00.jcl",
        "impactScore": 0.90,
        "impactLevel": "High",
        "impactType": "Direct",
        "affectedParagraphs": ["DD statements for transaction/report files"],
        "dependencyPath": ["RPTAUD00.jcl", "RPTAUD00.cbl"],
        "rationale": "JCL for batch reporting; LRECL and DD statements must be updated for new record length including CHANNEL-CODE."
      }
    ]
  }
}
```

---

**Visualization**:

```mermaid
graph TD
  subgraph Copybooks
    TRNREC["src/copybook/common/TRNREC.cpy"]
  end
  subgraph Programs
    PORTTRAN["src/programs/portfolio/PORTTRAN.cbl"]
    RPTAUD00["src/programs/batch/RPTAUD00.cbl"]
    TSTGEN00["src/programs/test/TSTGEN00.cbl"]
    UTLVAL00["src/programs/utility/UTLVAL00.cbl"]
  end
  subgraph JCL
    RPTAUD00JCL["src/jcl/RPTAUD00.jcl"]
  end

  TRNREC -- High Impact --> PORTTRAN
  TRNREC -- High Impact --> RPTAUD00
  TRNREC -- High Impact --> TSTGEN00
  TRNREC -- High Impact --> UTLVAL00
  RPTAUD00 -- High Impact --> RPTAUD00JCL

  style TRNREC fill:#ffcccc,stroke:#d33,stroke-width:2px
  style PORTTRAN fill:#ffcccc,stroke:#d33,stroke-width:2px
  style RPTAUD00 fill:#ffcccc,stroke:#d33,stroke-width:2px
  style TSTGEN00 fill:#ffcccc,stroke:#d33,stroke-width:2px
  style UTLVAL00 fill:#ffcccc,stroke:#d33,stroke-width:2px
  style RPTAUD00JCL fill:#ffcccc,stroke:#d33,stroke-width:2px
```

---

**Notes**:
- Only files present in the repository are included.
- All listed components are directly impacted by the addition of `CHANNEL-CODE` and require updates to definitions, file layouts, or logic.
- No unrelated or non-existent files are included.
- All impact scores are high due to the centrality of transaction data in batch, reporting, and test processes.
